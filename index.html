<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>RooKieZ的小窝</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="RooKieZ的小窝"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="RooKieZ的小窝"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="RooKieZ的小窝"><meta property="og:url" content="https://rookie-zgy1513.github.io/"><meta property="og:site_name" content="RooKieZ的小窝"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://rookie-zgy1513.github.io/img/og_image.png"><meta property="article:author" content="RooKieZ"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://rookie-zgy1513.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://rookie-zgy1513.github.io"},"headline":"RooKieZ的小窝","image":["https://rookie-zgy1513.github.io/img/og_image.png"],"author":{"@type":"Person","name":"RooKieZ"},"publisher":{"@type":"Organization","name":"RooKieZ的小窝","logo":{"@type":"ImageObject","url":"https://rookie-zgy1513.github.io/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="aaa" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="RooKieZ的小窝" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-08-13T12:57:26.637Z" title="2025/8/13 20:57:26">2025-08-13</time>发表</span><span class="level-item"><time dateTime="2025-08-13T13:01:24.159Z" title="2025/8/13 21:01:24">2025-08-13</time>更新</span><span class="level-item">25 分钟读完 (大约3729个字)</span></div></div><div class="content"><hr>
<p>title:OO第一单元总结</p>
<p>tags:OO</p>
<h2 id="date-2025-8-13-17-15-00"><a href="#date-2025-8-13-17-15-00" class="headerlink" title="date:2025&#x2F;8&#x2F;13 17:15:00"></a>date:2025&#x2F;8&#x2F;13 17:15:00</h2><h1 id="OO第一单元总结"><a href="#OO第一单元总结" class="headerlink" title="OO第一单元总结"></a>OO第一单元总结</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>复杂度分析使用IDEA的 <code>MetricsReloaded</code>插件</p>
<p>代码规模分析利用IDEA的 <code>static</code>插件</p>
<p><code>UML</code>类图使用IDEA绘图，再自行调整</p>
<h3 id="任务概览"><a href="#任务概览" class="headerlink" title="任务概览"></a>任务概览</h3><h4 id="作业要求"><a href="#作业要求" class="headerlink" title="作业要求"></a>作业要求</h4><ul>
<li>作业1：根据形式化定义解析输入的表达式，输出恒等变形展开括号后的表达式。</li>
<li>作业2：形式化定义加入指数函数和自定义函数。</li>
<li>作业3：支持自定义函数嵌套并加入求导算子。</li>
</ul>
<h2 id="第一次作业"><a href="#第一次作业" class="headerlink" title="第一次作业"></a>第一次作业</h2><p>第一次作业为对包含幂函数与常数的表达式进行化简，涉及相对简单的嵌套，UML类图如下所示。</p>
<p><img src="/hw1.png"></p>
<h3 id="架构分析"><a href="#架构分析" class="headerlink" title="架构分析"></a>架构分析</h3><p>通过分析 <code>Expr</code>与 <code>Term</code>的结构。我们不难发现，一个基本的 <code>Expr</code>可以看成又一个个基元构成，即</p>
<p>$$<br>Expr  &#x3D;  \sum a \times x ^ b<br>$$</p>
<p>数据存储上，依照形式化表达设计为 <code>Expr-&gt;Term-&gt;Factor</code>。<code>Parser</code>和 <code>Lexer</code>作为工具类，分别承担句法分析和词法分析的功能。</p>
<p>值得注意的是，架构中事实上没有区分 <code>Num</code>和 <code>Power</code>，而是将其统一为 <code>Unit</code>类，存储一个形如$a \times x ^ b$的因子。</p>
<p>在读取和存储过程中，<code>Parser</code>和 <code>Lexer</code>合作，构建了一棵多叉表达式树。</p>
<p><code>Factor</code>接口为因子类的公共接口，所有的因子都实现了这个接口，所有的非 <code>Unit</code>类通过 <code>Poly</code>，即多项式类进行运算，最后通过 <code>Poly</code>类调用 <code>Unit</code>类的 <code>toString</code>方法实现输出。</p>
<p>下图展示了这种读取和存储的过程的一个例子：</p>
<p><img src="https://saltyfishyjk.github.io/2022/03/25/%E3%80%8CBUAA-OO-Unit-1-HW4%E3%80%8D%E7%AC%AC%E4%B8%80%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6.png" alt="img"></p>
<p>具体而言，获得答案的计算过程是和读取解析相<strong>解耦合</strong>的。在调用顶层 <code>Expr</code>对象的 <code>extend()</code>方法后，逐层向下调用 <code>extend()</code>方法，得到展开式。这其中，得益于 <code>Unit</code>类的统一性，每一层向上返回的都是一个 <code>Unit</code>对象的集合，达到了形式上和接口的统一。</p>
<h3 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><p>本次作业部分方法复杂度如下图，其余方法复杂度较低，未在图中体现。</p>
<p>可以看到，<code>Parser</code>中的 <code>parseFactor()</code>方法复杂度较高，分析原因知，设计该方法时对于常数和幂函数的解析都全部列在其中，没有分别抽象为分别的方法；<code>Unit</code>中的 <code>toString()</code>方法复杂度较高，为了优化输出的长度导致特判较多，复杂度较高。</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>CogC</th>
<th>ev(G)</th>
<th>iv(G)</th>
<th>v(G)</th>
</tr>
</thead>
<tbody><tr>
<td>Parser.parseFactor()</td>
<td>14</td>
<td>1</td>
<td>8</td>
<td>8</td>
</tr>
<tr>
<td>Parser.parseExpr()</td>
<td>8</td>
<td>1</td>
<td>6</td>
<td>6</td>
</tr>
<tr>
<td>expr.Unit.toString()</td>
<td>7</td>
<td>1</td>
<td>6</td>
<td>7</td>
</tr>
<tr>
<td>Lexer.next()</td>
<td>6</td>
<td>2</td>
<td>4</td>
<td>6</td>
</tr>
<tr>
<td>expr.Expr.extend()</td>
<td>6</td>
<td>2</td>
<td>6</td>
<td>6</td>
</tr>
<tr>
<td>expr.Poly.toString()</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td>expr.Term.extend()</td>
<td>5</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>Parser.parseTerm()</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>expr.Poly.multiUnit(Unit)</td>
<td>4</td>
<td>1</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>expr.Poly.Merge()</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>expr.Poly.adjustUnit()</td>
<td>3</td>
<td>3</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>expr.Poly.multiExpr(Poly)</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>Lexer.getNumber()</td>
<td>2</td>
<td>1</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>Parser.getExp()</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Processor.treatPlusMinus()</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>expr.Poly.Negate()</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Lexer.Lexer(String)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Lexer.peek()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Main.main(String[])</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Parser.Parser(Lexer)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Processor.adjustSign()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Processor.consumeBlank()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Processor.getString(String)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Processor.newInput(String)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Processor.outputString()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Processor.replaceDoubleStar()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Expr.Negate()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Expr.addTerm(Term)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Expr.equals(Expr)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Expr.setExp(BigInteger)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Poly.Poly()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Poly.add(Poly)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Poly.createOne()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Poly.unitMulti(Unit, Unit)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Term.Negate()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Term.addFactor(Factor)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.Negate()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.Unit(BigInteger)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.Unit(Type)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.canMerge(Unit)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.compareTo(Unit)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.getCoff()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.getExp()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.getType()</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.merge(Unit)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.multiUnit(Unit)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.setCoff(BigInteger)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>expr.Unit.setExp(BigInteger)</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td></td>
</tr>
</tbody></table>
<h3 id="Bug分析"><a href="#Bug分析" class="headerlink" title="Bug分析"></a>Bug分析</h3><p>本次作业没有出现bug。</p>
<p>在对room内其他同学互测时，发现两个bug：一个是没有处理$0$的输出；另一个是没有妥善处理表达式里的 <code>\t</code>和空格。</p>
<p>同时，我在此次作业中设计并实现了一个自动化评测机，这对检验程序的正确性有不小的帮助，也帮助我实现了hack，详细的分析将在<strong>评测部分</strong>介绍。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>“工欲善其事，必先利其器”</p>
<p>在写本次作业之初，我设计过很多架构，在设计阶段就推倒重来若干次。尽管在Pre中的冒险者游戏中已经我初步领会了面向对象的思想，但是面对较为抽象的表达式解析仍然显得捉襟见肘。</p>
<p>尽管如此，得益于 <code>training</code>部分提供的 <code>Parser</code>和 <code>Lexer</code>思路，我最终得以确定这个较为面向对象的设计。但是，这个架构依然存在相当的不足，在后面的迭代开发介绍中将会着重介绍。</p>
<hr>
<h2 id="第二次作业"><a href="#第二次作业" class="headerlink" title="第二次作业"></a>第二次作业</h2><p>相比于第一次作业，第二次作业新增了<strong>自定义函数</strong>与<strong>指数函数</strong>相关的内容，同时支持嵌套括号的解析。</p>
<p>相比第一次作业，增加了 <code>Func</code>类处理自定义函数，同时增加了 <code>Exp</code>类处理指数函数，<strong>UML</strong>类图如下：</p>
<p>![](&#x2F;Users&#x2F;zhengguangyi&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20240319220101050.png)</p>
<h3 id="架构分析-1"><a href="#架构分析-1" class="headerlink" title="架构分析"></a>架构分析</h3><p>相较于上一次作业以及未来的第三次作业，本次作业的工作量无疑是最大的，也难怪纪一鹏老师说这次作业很有可能会是本学期<strong>OO</strong>的难度巅峰。</p>
<p>对于本次作业的两个新增要求，我先完成了自定义函数的实现，再完成了指数函数的部分。</p>
<h5 id="自定义函数部分"><a href="#自定义函数部分" class="headerlink" title="自定义函数部分"></a>自定义函数部分</h5><p>自定义函数分为两个部分，一是读入，二是调用。</p>
<p><strong>有关读入</strong>，由于函数定义式依然符合我们的多项式语意，且定义式内不允许循环定义，故而直接沿用上一次的 <code>Lexer</code>和 <code>Parser</code>来解析。</p>
<p><strong>有关调用</strong>，我在读入表达式时，就建立了参数与实参的Map，在解析时利用Map中的Map.Entry接口进行替换，效果不错，但是相较正则表达式替换的方法，虽然正确性上有保障，但是时间复杂度较高。</p>
<h4 id="指数函数部分"><a href="#指数函数部分" class="headerlink" title="指数函数部分"></a>指数函数部分</h4><p>通过分析本次式子可知，本次基元有所更新</p>
<p>$$<br>Expr  &#x3D;  \sum a \times x ^ b \times exp(Factor) ^ c<br>$$</p>
<p>由于指数函数的特殊性，故我直接在初始化指数函数时直接将基元变形成如下式子，便于后续计算：</p>
<p>$$<br>Expr  &#x3D;  \sum a \times x ^ b \times exp(Factor \times c)<br>$$</p>
<p>同样，我利用Poly类的 <code>toString</code>方法和String类的equals方法判断exp内的Factor是否相等，来进行后续合并。</p>
<h3 id="复杂度分析-1"><a href="#复杂度分析-1" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><p>| Method                              | CogC | ev(G) | iv(G) | v(G) |</p>
<p>|———————————–|—-|—–|—–|—-|</p>
<p>| Term.replace(HashMap&lt;Type, Factor&gt;) | 30   | 1     | 8     | 8    |</p>
<p>| Parser.parseFactor()                | 19   | 1     | 12    | 12   |</p>
<p>| Unit.isSimple()                     | 11   | 7     | 9     | 15   |</p>
<p>| Unit.toString()                     | 11   | 1     | 9     | 10   |</p>
<p>| Unit.setExp(BigInteger)             | 10   | 1     | 4     | 8    |</p>
<p>| Lexer.next()                        | 9    | 2     | 5     | 7    |</p>
<p>| Parser.parseExpr()                  | 8    | 1     | 6     | 6    |</p>
<p>| Unit.compareTo(Unit)                | 8    | 7     | 7     | 8    |</p>
<p>| Exp.ifOne()                         | 7    | 5     | 2     | 5    |</p>
<p>| Expr.extend()                       | 6    | 2     | 6     | 6    |</p>
<p>| Poly.Merge()                        | 6    | 1     | 5     | 5    |</p>
<p>| Func.invoke(List <code>&lt;Factor&gt;</code>)           | 5    | 1     | 2     | 4    |</p>
<p>| Poly.toString()                     | 5    | 4     | 3     | 5    |</p>
<p>| Term.extend()                       | 5    | 1     | 4     | 4    |</p>
<p>| Parser.parseTerm()                  | 4    | 1     | 4     | 4    |</p>
<p>| Poly.multiUnit(Unit)                | 4    | 1     | 3     | 3    |</p>
<p>| Poly.unitMulti(Unit, Unit)          | 4    | 1     | 5     | 5    |</p>
<p>| Unit.multiUnit(Unit)                | 4    | 1     | 4     | 5    |</p>
<p>| Unit.wipeExp()                      | 4    | 4     | 1     | 5    |</p>
<p>| Exp.Exp(Factor)                     | 3    | 1     | 3     | 4    |</p>
<p>| Exp.toString()                      | 3    | 1     | 3     | 3    |</p>
<p>| Poly.adjustUnit()                   | 3    | 3     | 2     | 3    |</p>
<p>| Poly.multiExpr(Poly)                | 3    | 1     | 3     | 3    |</p>
<p>| Unit.Unit(Type)                     | 3    | 1     | 1     | 4    |</p>
<p>| Unit.replace(HashMap&lt;Type, Factor&gt;) | 3    | 3     | 3     | 4    |</p>
<p>| Exp.replace(HashMap&lt;Type, Factor&gt;)  | 2    | 1     | 2     | 2    |</p>
<p>| Lexer.getNumber()                   | 2    | 1     | 3     | 3    |</p>
<p>| Parser.parseFuncDef()               | 2    | 1     | 3     | 3    |</p>
<p>| Poly.isSimple()                     | 2    | 3     | 1     | 3    |</p>
<p>| Unit.clone()                        | 2    | 1     | 3     | 3    |</p>
<p>| Expr.clone()                        | 1    | 1     | 2     | 2    |</p>
<p>| Expr.pow(BigInteger)                | 1    | 1     | 2     | 2    |</p>
<p>| Expr.replace(HashMap&lt;Type, Factor&gt;) | 1    | 1     | 2     | 2    |</p>
<p>| Main.main(String[])                 | 1    | 1     | 2     | 2    |</p>
<p>| Parser.getExp()                     | 1    | 1     | 2     | 2    |</p>
<p>| Parser.parseFunc()                  | 1    | 1     | 2     | 2    |</p>
<p>| Poly.Negate()                       | 1    | 1     | 2     | 2    |</p>
<p>| Poly.clone()                        | 1    | 1     | 2     | 2    |</p>
<p>| Poly.pow(BigInteger)                | 1    | 1     | 2     | 2    |</p>
<p>| Processor.treatPlusMinus()          | 1    | 1     | 2     | 2    |</p>
<p>| Term.clone()                        | 1    | 1     | 2     | 2    |</p>
<p>| Exp.clone()                         | 0    | 1     | 1     | 1    |</p>
<p>| Exp.compareTo(Exp)                  | 0    | 1     | 1     | 1    |</p>
<p>| Exp.equals(Exp)                     | 0    | 1     | 1     | 1    |</p>
<p>| Exp.getExponent()                   | 0    | 1     | 1     | 1    |</p>
<p>| Exp.isSimple()                      | 0    | 1     | 1     | 1    |</p>
<p>| Exp.multExp(Exp)                    | 0    | 1     | 1     | 1    |</p>
<p>| Exp.pow(BigInteger)                 | 0    | 1     | 1     | 1    |</p>
<p>| Exp.setExponent(BigInteger)         | 0    | 1     | 1     | 1    |</p>
<p>| Expr.Negate()                       | 0    | 1     | 1     | 1    |</p>
<p>| Expr.addExpr(Expr)                  | 0    | 1     | 1     | 1    |</p>
<p>| Expr.addTerm(Term)                  | 0    | 1     | 1     | 1    |</p>
<p>| Expr.equals(Expr)                   | 0    | 1     | 1     | 1    |</p>
<p>| Expr.setExp(BigInteger)             | 0    | 1     | 1     | 1    |</p>
<p>| Func.Func(String, Character[])      | 0    | 1     | 1     | 1    |</p>
<p>| Lexer.Lexer(String)                 | 0    | 1     | 1     | 1    |</p>
<p>| Lexer.peek()                        | 0    | 1     | 1     | 1    |</p>
<p>| Parser.Parser(Lexer)                | 0    | 1     | 1     | 1    |</p>
<p>| Poly.Poly()                         | 0    | 1     | 1     | 1    |</p>
<p>| Poly.add(Poly)                      | 0    | 1     | 1     | 1    |</p>
<p>| Poly.createOne()                    | 0    | 1     | 1     | 1    |</p>
<p>| Poly.isEmpty()                      | 0    | 1     | 1     | 1    |</p>
<p>| Processor.adjustSign()              | 0    | 1     | 1     | 1    |</p>
<p>| Processor.consumeBlank()            | 0    | 1     | 1     | 1    |</p>
<p>| Processor.getString(String)         | 0    | 1     | 1     | 1    |</p>
<p>| Processor.newInput(String)          | 0    | 1     | 1     | 1    |</p>
<p>| Processor.outputString()            | 0    | 1     | 1     | 1    |</p>
<p>| Processor.replaceDoubleStar()       | 0    | 1     | 1     | 1    |</p>
<p>| Term.Negate()                       | 0    | 1     | 1     | 1    |</p>
<p>| Term.addFactor(Factor)              | 0    | 1     | 1     | 1    |</p>
<p>| Term.pow(BigInteger)                | 0    | 1     | 1     | 1    |</p>
<p>| Unit.Negate()                       | 0    | 1     | 1     | 1    |</p>
<p>| Unit.Unit(BigInteger)               | 0    | 1     | 1     | 1    |</p>
<p>| Unit.Unit(Type, Factor)             | 0    | 1     | 1     | 1    |</p>
<p>| Unit.canMerge(Unit)                 | 0    | 1     | 1     | 1    |</p>
<p>| Unit.getCoff()                      | 0    | 1     | 1     | 1    |</p>
<p>| Unit.getExp()                       | 0    | 1     | 1     | 1    |</p>
<p>| Unit.getExpFunc()                   | 0    | 1     | 1     | 1    |</p>
<p>| Unit.getType()                      | 0    | 1     | 1     | 1    |</p>
<p>| Unit.merge(Unit)                    | 0    | 1     | 1     | 1    |</p>
<p>| Unit.pow(BigInteger)                | 0    | 1     | 1     | 1    |</p>
<p>| Unit.setCoff(BigInteger)            | 0    | 1     | 1     | 1    |</p>
<p>| Unit.setExpFunc(Exp)                | 0    | 1     | 1     | 1    |</p>
<p>| Unit.setType(Type)                  | 0    | 1     | 1     | 1    |</p>
<p>可以看出，本次架构在Term类中实现自定义函数的替换部分的 <code>replace</code>方法复杂度极高，在Debug过程中，也同样是这个方法耗去了我大量的时间，可见越复杂，越易错！！！</p>
<h3 id="Bug分析-1"><a href="#Bug分析-1" class="headerlink" title="Bug分析"></a>Bug分析</h3><p>本次作业没有出现bug。</p>
<p>在对room内其他同学互测时，发现两个bug：一个是对于exp的括号化简出错；另一个是自定义函数中exp函数替换出错。</p>
<p>在本次hack过程中，我着重查看了同屋同学代码架构的复杂程度进行了分析，对于明显架构复杂的代码进行hack，都得到了成功。</p>
<p>具体的hack方法则是利用cxc同学的评测机，对于可疑代码进行评测，得到错误输出后针对数据进行化简使其符合互测数据限制，最终hack成功。</p>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p>第二次作业是我在第一单元中花费时间<strong>最长</strong>的一次，尤其是指数函数的引入与化简合并，在Debug时给我造成了不小的困难，由于在完成本次作业时流感发烧，因此我在优化方面仅仅做了合并同类项和去exp函数的多余括号，但性能分上取得了 <code>97.5</code>分，可以说是十分侥幸的。同时，由于储存基元时采用了ArrayList，因此在合并同类项与Unit运算时被迫使用深克隆，而由于身体状态不佳，处于正确性考虑，我大量使用克隆，这也使我的程序运行时间大大增长。</p>
<hr>
<h2 id="第三次作业"><a href="#第三次作业" class="headerlink" title="第三次作业"></a>第三次作业</h2><p>本次作业引入了求导因子。本以为是最痛苦的一集，没想到成了最速的一集。UML类图如下所示：</p>
<p>![image-20240319231919806](&#x2F;Users&#x2F;zhengguangyi&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20240319231919806.png)</p>
<h3 id="架构分析-2"><a href="#架构分析-2" class="headerlink" title="架构分析"></a>架构分析</h3><p>与第二次作业相比，本次作业架构几乎没有发生变化，没有引入新的类。对于求导操作，与求字符串相似，在每一个相关的类中引入<strong>getDerivative()<strong>方法，返回</strong>Poly</strong>多项式类。对于带函数的求导，采用将自定义函数完全展开后再进行求导的方法。</p>
<h3 id="复杂度分析-2"><a href="#复杂度分析-2" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><p>| Method                              | CogC | ev(G) | iv(G) | v(G) |</p>
<p>|———————————–|—-|—–|—–|—-|</p>
<p>| Term.replace(HashMap&lt;Type, Factor&gt;) | 30   | 1     | 8     | 8    |</p>
<p>| Parser.parseFactor()                | 20   | 1     | 13    | 13   |</p>
<p>| Unit.isSimple()                     | 11   | 7     | 9     | 15   |</p>
<p>| Unit.toString()                     | 11   | 1     | 9     | 10   |</p>
<p>| Lexer.next()                        | 10   | 2     | 6     | 8    |</p>
<p>| Unit.setExp(BigInteger)             | 10   | 1     | 4     | 8    |</p>
<p>| Parser.parseExpr()                  | 8    | 1     | 6     | 6    |</p>
<p>| Unit.compareTo(Unit)                | 8    | 7     | 7     | 8    |</p>
<p>| Exp.ifOne()                         | 7    | 5     | 2     | 5    |</p>
<p>| Expr.extend()                       | 6    | 2     | 6     | 6    |</p>
<p>| Poly.Merge()                        | 6    | 1     | 5     | 5    |</p>
<p>| Func.invoke(List <code>&lt;Factor&gt;</code>)           | 5    | 1     | 2     | 4    |</p>
<p>| Main.main(String[])                 | 5    | 3     | 4     | 5    |</p>
<p>| Poly.toString()                     | 5    | 4     | 3     | 5    |</p>
<p>| Term.extend()                       | 5    | 1     | 4     | 4    |</p>
<p>| Parser.parseTerm()                  | 4    | 1     | 4     | 4    |</p>
<p>| Poly.multiUnit(Unit)                | 4    | 1     | 3     | 3    |</p>
<p>| Unit.multiUnit(Unit)                | 4    | 1     | 4     | 5    |</p>
<p>| Unit.wipeExp()                      | 4    | 4     | 1     | 5    |</p>
<p>| Exp.Exp(Factor)                     | 3    | 1     | 3     | 4    |</p>
<p>| Exp.toString()                      | 3    | 1     | 3     | 3    |</p>
<p>| Parser.parseDerivative()            | 3    | 1     | 4     | 4    |</p>
<p>| Poly.adjustUnit()                   | 3    | 3     | 2     | 3    |</p>
<p>| Poly.compareTo(Poly)                | 3    | 3     | 3     | 3    |</p>
<p>| Poly.multiExpr(Poly)                | 3    | 1     | 3     | 3    |</p>
<p>| Unit.Unit(Type)                     | 3    | 1     | 1     | 4    |</p>
<p>| Unit.replace(HashMap&lt;Type, Factor&gt;) | 3    | 3     | 3     | 4    |</p>
<p>| Exp.clone()                         | 2    | 1     | 1     | 2    |</p>
<p>| Exp.replace(HashMap&lt;Type, Factor&gt;)  | 2    | 1     | 2     | 2    |</p>
<p>| Lexer.getNumber()                   | 2    | 1     | 3     | 3    |</p>
<p>| Parser.parseFuncDef()               | 2    | 1     | 3     | 3    |</p>
<p>| Poly.isSimple()                     | 2    | 3     | 1     | 3    |</p>
<p>| Unit.clone()                        | 2    | 1     | 3     | 3    |</p>
<p>| Unit.getDerivative(Type)            | 2    | 1     | 3     | 3    |</p>
<p>| Exp.getDerivative(Type)             | 1    | 2     | 1     | 2    |</p>
<p>| Expr.clone()                        | 1    | 1     | 2     | 2    |</p>
<p>| Expr.pow(BigInteger)                | 1    | 1     | 2     | 2    |</p>
<p>| Expr.replace(HashMap&lt;Type, Factor&gt;) | 1    | 1     | 2     | 2    |</p>
<p>| Parser.getExp()                     | 1    | 1     | 2     | 2    |</p>
<p>| Parser.parseFunc()                  | 1    | 1     | 2     | 2    |</p>
<p>| Poly.Negate()                       | 1    | 1     | 2     | 2    |</p>
<p>| Poly.clone()                        | 1    | 1     | 2     | 2    |</p>
<p>| Poly.getDerivative(Type)            | 1    | 1     | 2     | 2    |</p>
<p>| Poly.pow(BigInteger)                | 1    | 1     | 2     | 2    |</p>
<p>| Poly.toTerms()                      | 1    | 1     | 2     | 2    |</p>
<p>| Processor.treatPlusMinus()          | 1    | 1     | 2     | 2    |</p>
<p>| Term.clone()                        | 1    | 1     | 2     | 2    |</p>
<p>| Exp.compareTo(Exp)                  | 0    | 1     | 1     | 1    |</p>
<p>| Exp.equals(Exp)                     | 0    | 1     | 1     | 1    |</p>
<p>| Exp.getExponent()                   | 0    | 1     | 1     | 1    |</p>
<p>| Exp.isSimple()                      | 0    | 1     | 1     | 1    |</p>
<p>| Exp.multExp(Exp)                    | 0    | 1     | 1     | 1    |</p>
<p>| Exp.pow(BigInteger)                 | 0    | 1     | 1     | 1    |</p>
<p>| Exp.setExponent(BigInteger)         | 0    | 1     | 1     | 1    |</p>
<p>| Expr.Expr()                         | 0    | 1     | 1     | 1    |</p>
<p>| Expr.Expr(Poly)                     | 0    | 1     | 1     | 1    |</p>
<p>| Expr.Negate()                       | 0    | 1     | 1     | 1    |</p>
<p>| Expr.addExpr(Expr)                  | 0    | 1     | 1     | 1    |</p>
<p>| Expr.addTerm(Term)                  | 0    | 1     | 1     | 1    |</p>
<p>| Expr.equals(Expr)                   | 0    | 1     | 1     | 1    |</p>
<p>| Expr.getDerivative(Type)            | 0    | 1     | 1     | 1    |</p>
<p>| Expr.setExp(BigInteger)             | 0    | 1     | 1     | 1    |</p>
<p>| Func.Func(String, Character[])      | 0    | 1     | 1     | 1    |</p>
<p>| Lexer.Lexer(String)                 | 0    | 1     | 1     | 1    |</p>
<p>| Lexer.peek()                        | 0    | 1     | 1     | 1    |</p>
<p>| Parser.Parser(Lexer)                | 0    | 1     | 1     | 1    |</p>
<p>| Poly.Poly()                         | 0    | 1     | 1     | 1    |</p>
<p>| Poly.add(Poly)                      | 0    | 1     | 1     | 1    |</p>
<p>| Poly.addUnit(Unit)                  | 0    | 1     | 1     | 1    |</p>
<p>| Poly.createOne()                    | 0    | 1     | 1     | 1    |</p>
<p>| Poly.isEmpty()                      | 0    | 1     | 1     | 1    |</p>
<p>| Poly.unitMulti(Unit, Unit)          | 0    | 1     | 1     | 1    |</p>
<p>| Processor.adjustSign()              | 0    | 1     | 1     | 1    |</p>
<p>| Processor.consumeBlank()            | 0    | 1     | 1     | 1    |</p>
<p>| Processor.getString(String)         | 0    | 1     | 1     | 1    |</p>
<p>| Processor.newInput(String)          | 0    | 1     | 1     | 1    |</p>
<p>| Processor.outputString()            | 0    | 1     | 1     | 1    |</p>
<p>| Processor.replaceDoubleStar()       | 0    | 1     | 1     | 1    |</p>
<p>| Term.Negate()                       | 0    | 1     | 1     | 1    |</p>
<p>| Term.addFactor(Factor)              | 0    | 1     | 1     | 1    |</p>
<p>| Term.pow(BigInteger)                | 0    | 1     | 1     | 1    |</p>
<p>| Unit.Negate()                       | 0    | 1     | 1     | 1    |</p>
<p>| Unit.Unit(BigInteger)               | 0    | 1     | 1     | 1    |</p>
<p>| Unit.Unit(Type, Factor)             | 0    | 1     | 1     | 1    |</p>
<p>| Unit.canMerge(Unit)                 | 0    | 1     | 1     | 1    |</p>
<p>| Unit.getCoff()                      | 0    | 1     | 1     | 1    |</p>
<p>| Unit.getExp()                       | 0    | 1     | 1     | 1    |</p>
<p>| Unit.getExpFunc()                   | 0    | 1     | 1     | 1    |</p>
<p>| Unit.getType()                      | 0    | 1     | 1     | 1    |</p>
<p>| Unit.merge(Unit)                    | 0    | 1     | 1     | 1    |</p>
<p>| Unit.pow(BigInteger)                | 0    | 1     | 1     | 1    |</p>
<p>| Unit.setCoff(BigInteger)            | 0    | 1     | 1     | 1    |</p>
<p>| Unit.setExpFunc(Exp)                | 0    | 1     | 1     | 1    |</p>
<p>| Unit.setType(Type)                  | 0    | 1     | 1     | 1    |</p>
<p>| Unit.simpleClone()                  | 0    | 1     | 1     | 1    |</p>
<p>与第二次作业中复杂度较高的方法相同，原因一致。</p>
<h3 id="Bug分析-2"><a href="#Bug分析-2" class="headerlink" title="Bug分析"></a>Bug分析</h3><p>本次作业在强测中未出现Bug，但是在互测中由于TLE中刀，原因正如我在第二次作业总结中写的那样——无脑克隆，而克隆方法本身需要递归，导致最终超时，这也是由于我个人的侥幸心理，认为互测数据不强，在明知有超时风险时，选择写OS作业，未进行优化。虽然强测侥幸过关，但是在互测中还是漏了马脚，果然还是这个道理。</p>
<blockquote>
<p>She was still too young to know that life never gives anything for nothing, and that a price is always exacted for what fate bestows.</p>
</blockquote>
<blockquote>
<p>那时候她还太年轻，不知道所有命运馈赠的礼物，早已在暗中标好了价格。</p>
</blockquote>
<blockquote>
<p>——茨威格</p>
</blockquote>
<h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><p>第三次作业不仅没有想象中可怕，还是三次作业中耗时最少的一次。得益于层次化结构的设计，新增求导运算的升级过程非常顺利，唯一的注意点是数学上的求导法则，需要在编码时严格遵守。只是可惜我的侥幸心理导致互测中刀，现在想来仍然感到深深可惜！！！</p>
<hr>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>本单元由于身体状况与个人时间的关系，只在第一次作业搭建了评测机，后续使用了cxc同学的评测机，这里再次感谢cxc同学！！！</p>
<p>在个人搭建评测机的过程中，我主要还是使用模拟递归下降的过程构建测试数据，并利用 <code>Python</code>中的 <code>Sympy</code>包来达到化简表达式并判断正误的效果，唯一的缺点是速度太慢。同时，我在构建评测数据时特意加入了诸如 <code>x-x</code>,<code>+00000</code>等数据，来保证随机生成数据的特殊性，但是只是可惜评测机hack效果不佳，更多还是靠手动构建数据。</p>
<hr>
<h2 id="心得体会"><a href="#心得体会" class="headerlink" title="心得体会"></a>心得体会</h2><p>第一单元就这样痛并快乐地坚持了过去，但是和同学们投入的时间相比，我好像完成得还算轻松（?）</p>
<p>通过表达式解析的练习，我深刻体会了面向对象的设计思想，了解了递归下降的解析方法，初步尝试了层次化的类设计，这也为OS的Lab1提供了一些帮助。</p>
<p>最后还是感慨：设计为先，一个好的设计能为后续的编码工作省去不少麻烦；就比如，每次作业前，我都要花上一天半来进行设计，而不是基于上手编码，否则代码必然是漏洞百出。此外，还必须注重可扩展性，即在当前设计中打一个提前量，给未来可能引入的设计提前预留一些空间。</p>
<p>打个比方，我的程序在第一次就支持括号嵌套，第二次就支持自定义函数嵌套，现在第三次作业的程序还支持多变量运算与求导等等。</p>
<hr>
<h2 id="未来方向"><a href="#未来方向" class="headerlink" title="未来方向"></a>未来方向</h2><p>总体而言，我认为课程组对于第一单元的设置已相对完备，但是第三次作业相较前两次明显过于轻松，我认为可以加入多变量运算与求导等要求。同样，我认为强测应该设置专门数据来卡时间复杂度，这样就能狠狠整治向我这样心存侥幸的同学！！！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-08-13T09:15:00.000Z" title="2025/8/13 17:15:00">2025-08-13</time>发表</span><span class="level-item"><time dateTime="2025-08-13T09:15:49.359Z" title="2025/8/13 17:15:49">2025-08-13</time>更新</span><span class="level-item">26 分钟读完 (大约3930个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/08/13/BUAA%20OO%20Unit3%20%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93/">OO第三单元总结</a></p><div class="content"><h1 id="BUAA-OO-Unit3-单元总结"><a href="#BUAA-OO-Unit3-单元总结" class="headerlink" title="BUAA OO Unit3 单元总结"></a>BUAA OO Unit3 单元总结</h1><p>[TOC]</p>
<h2 id="测试过程"><a href="#测试过程" class="headerlink" title="测试过程"></a>测试过程</h2><h3 id="黑箱测试与白箱测试"><a href="#黑箱测试与白箱测试" class="headerlink" title="黑箱测试与白箱测试"></a>黑箱测试与白箱测试</h3><p>通过查阅资料，我暂且给出黑箱测试与白箱测试的定义和方法。</p>
<ul>
<li><strong>黑箱测试</strong>也称功能测试、数据驱动测试或基于规格说明的测试。测试者只知道程序的输入、输出和系统的功能，这是从使用者的角度针对软件的接口、功能及外部结构进行的测试，不考虑程序内部实现逻辑。</li>
<li><strong>白箱测试</strong>也称结构测试、逻辑驱动测试或基于程序本身的测试，测试程序内部结构或运行。在白箱测试时，从程序设计语言的角度来设计测试样例。测试者输入数据并验证数据在程序中的流动路径，并确定适当的输出，类似测试电路中的节点。</li>
</ul>
<p>了解了黑箱测试和白箱测试的定义后，我认识到虽然之前从未接触过这两个概念，但已经使用类似的方法开始测试了。</p>
<p>首先是白箱测试，从C语言程序设计课开始，我似乎就已经开始使用白箱测试了。对我来说，白箱测试的用处是在写完代码后确定程序中的每一步是否都是按照设想执行的，具体的实现方法往往是在每一行可能改变变量值的代码后都加上<code>printf()</code>或<code>System.out.println()</code>语句输出想要查看的变量值。我认为这种方法的效果与单步调试的效果相当，但更加简单直接、更加灵活且可用于多线程情况。</p>
<p>之后是黑箱测试，仅关注在给定功能要求和输入下的输出。这个也不陌生，各种课程组的评测机、自己写的评测机和对拍器以及本单元作业中出现的OKTest都是黑箱测试。</p>
<p>在日常使用中，对代码的测试往往是黑箱和白箱相结合的。以OS上机为例，在<strong>自认为</strong>完成要求后，我会先使用<code>make xxxx &amp;&amp; make run</code>跑一下课程组的测试。测试代码往往是单独的一个文件，并在其内调用我写好的函数，通过<code>assert</code>语句检查函数的返回值是否符合预期，这是黑箱测试。在这测试后，如果出现了问题，便需要具体检查函数的实现。这个过程既需要用人脑模拟代码的执行，又可以在多条关键语句前后加上<code>printk()</code>, <code>debugf()</code>检查变量值的变化是否符合逻辑预期，碰到不符合预期的地方便是发现bug，可以开始修改了，改完之后便可以使用黑箱测试继续测试最终结果，若结果不对就继续白箱测试……</p>
<h3 id="单元测试等多种测试手段"><a href="#单元测试等多种测试手段" class="headerlink" title="单元测试等多种测试手段"></a>单元测试等多种测试手段</h3><ul>
<li>单元测试：单元测试是针对程序模块（软件设计的最小单位）来进行正确性检验的测试工作，对面向过程的语言来说是测试函数，对面向对象的语言来说是测试类的行为。在第10次作业中，我构造大数据完全图对<code>qsp, qtvs, qtav, qba, qcs</code>等指令进行了测试，这便是单元测试的应用。</li>
<li>功能测试：通过上面黑箱测试的介绍可知功能测试大概就是黑箱测试，不考虑程序内部结构而仅测试程序执行的结果。</li>
<li>集成测试：集成测试是指把多个程序模块放在一起测试的方法。由于每个模块都正确不一定能保证整个程序正确，在单元测试后把多个单元结合在一起测试的集成测试必不可少。从实际效果上来说，在第三单元的功能不断增加的迭代开发过程中，前一次作业中全面的强测就相当于下一次作业的集成测试。</li>
<li>压力测试：压力测试是针对系统或是组建，为确定其稳定性而特意进行的严格测试。我感觉压力测试的意义在于低压测试对不同情况的覆盖不完全，从而可能检查不出程序的潜藏问题，而高压测试通过大数据、高并发(如果是多线程)，可以尽可能枚举出各种情况，增大发现问题的概率。距离而言，在电梯单元中，自己造出的弱数据不一定能发现像是轮询、死锁之类的问题，而助教出的压力测试强数据以及评测机超多线程同时跑多份代码的情况则几乎可以发现绝大多数问题。</li>
<li>回归测试：回归测试旨在测试软件原有功能在修改后是否保持完整，这也是纪老师在课上多次提到的。举例而言，在OO每个单元的迭代中，在测试完某一次作业后，要保留好自己构造的测试样例，下次迭代开发之后继续使用。</li>
</ul>
<h3 id="数据构造策略"><a href="#数据构造策略" class="headerlink" title="数据构造策略"></a>数据构造策略</h3><p>在三次作业中，我尝试写了两种数据生成器，一个是针对各种指令的集成测试数据生成器，一个是针对<code>qtvs, qbs, qcs</code>等指令的单元测试&#x2F;压力测试生成器。<br>单元测试生成器的逻辑比较简单，首先通过<code>ln</code>构建一个完全图，然后加入一定数量的<code>tag</code>，同时不断<code>ar, mr</code>并且<code>qtvs</code>，最后再一直<code>qtvs</code>总计<strong>10000</strong>条数据来进行压力测试，考虑到<code>OO</code>评测机的玄学属性，对于一切本地运行时间超过<code>1.6s</code>的数据，进行分析，并且对于代码进行相应的优化。<br>对于集成测试数据生成器，我原本想采用全部随机生成的方式，但发现这样生成的数据会有大量的异常，对于各种计数指令几乎起不到测试效果。于是我在生成器中维护了几个<code>id</code>池以及关系池用来存放已经生成的数据，并在具体生成指令时，通过随机数判断生成会引起异常的指令或是不会引起异常的指令，这样生成的数据效果尚可。</p>
<h2 id="架构与图模型"><a href="#架构与图模型" class="headerlink" title="架构与图模型"></a>架构与图模型</h2><p>在架构上，由于官方包已经给出了比较多且明确的要求和限制，我并没有做什么突破，不同类之间的层次关系都是按照官方包写的。<br>而对于图模型的设计和维护则是本单元算法考察的重点。下面重点谈谈我在三次作业中的图模型设计。</p>
<p>图使用邻接表，即<code>Acquaintance</code>构建。对于<code>qci</code>和<code>qbs</code>，hw9就涉及删边，故并不采用并查集等算法，在每次<code>qci</code>时做<code>BFS</code>，在加边&#x2F;删边时BFS动态维护<code>qbs</code>。对于<code>qts</code>，在加边和删边时动态维护。对于<code>qba</code>，对每个点开一个<code>TreeSet</code>，在增&#x2F;删&#x2F;修改边权时，动态维护该点的<code>bestAc</code>；对于<code>qcs</code>，每次遍历所有点进行统计。</p>
<p>优化的重点在于<code>Tag</code>中的方法，尤其是<code>qtvs</code>方法，经过本地压力测试，发现如果不进行动态维护，而是使用<code>JML</code>描述的直接查询的O($n^2$)的复杂度方法，则会<code>CTLE</code>，因此必须在每次<code>att, dft,ar, mr</code>的时候进行动态维护。</p>
<h2 id="规格与实现分离及性能问题"><a href="#规格与实现分离及性能问题" class="headerlink" title="规格与实现分离及性能问题"></a>规格与实现分离及性能问题</h2><h3 id="规格与实现分离"><a href="#规格与实现分离" class="headerlink" title="规格与实现分离"></a>规格与实现分离</h3><p>在这个单元中，其实很能体会到规格与实现的分离，因为假如不分离，实现按着<code>JML</code>来，便会因为性能不佳<del>O($n^2$)甚至O($n^3$)的时间复杂度可不是闹着玩的😅</del>而大把扣分。而为了实现规格与代码的分离，我认为要做以下两步。</p>
<ol>
<li>第一步是通读<code>JML</code>规格，把<code>JML</code>的规格设计转换为自然语言，抽象为一些符合常识的描述。在面对一些复杂方法时，这一步尤为重要，因为<code>JML</code>只描述规格，而我们写代码一般需要知道某个函数的意义(我认为一般人都没有在不知道意义的情况下直接把一堆通过遍历描述的方法转换为<code>dijkstra</code>等较优算法的能力)。</li>
<li>第二步是根据抽象出来的自然语言描述选取合适的数据结构和算法，完成需要实现的功能。</li>
</ol>
<h3 id="实现中的性能问题"><a href="#实现中的性能问题" class="headerlink" title="实现中的性能问题"></a>实现中的性能问题</h3><p>我的代码在本单元三次作业的强测和互测中均未出现性能问题。究其原因，在于我在每一次阅读<code>JML</code>时就对其中蕴涵的时间复杂度“陷阱”，在经过<strong>压力测试</strong>后采用动态维护，最终避免了<code>CTLE</code>。<br>通过上面规格与实现分离部分的讨论便可看出，规格和实现是可以分离的，而作为程序员，应该追求满足规格下的最优性能实现。但是否能达到很好的效果，则取决于程序员的知识积累与阅历。简单来说，如果知道更好的算法，就<strong>有可能</strong>写出性能更好的代码，否则<strong>仅凭规格</strong>就写不出来。</p>
<h2 id="Junit测试"><a href="#Junit测试" class="headerlink" title="Junit测试"></a>Junit测试</h2><p><strong>Junit测试</strong>与<strong>充分诠释了“测不准原理”的<code>OO</code>评测机</strong>共同构成了Unit3的两大梦魇，甚至在<strong>中测</strong>环节，<strong>Junit</strong>测试带来的压迫感远比程序正确性要大得多。</p>
<p>看着即将见底的<strong>提交剩余次数</strong>与随时可能测出问题的代码，和随机刷新的<strong>Junit</strong>测试<code>WA</code>测试点，大家难免骂骂咧咧😡，汗流浃背😅。</p>
<p>那么，有没有办法系统性的解决这一问题呢，我认为是有的。我们发现，<strong>Junit</strong>测试重点关注两个部分——覆盖率高的测试数据，以及确保“万无一失”的标程。</p>
<h3 id="构造覆盖率高的数据"><a href="#构造覆盖率高的数据" class="headerlink" title="构造覆盖率高的数据"></a>构造覆盖率高的数据</h3><p>构造覆盖率高的数据技巧不高，在完成数据构造后，可以运用IDEA中的<strong>使用覆盖率运行</strong>test来进行分支覆盖率测试，最终不断完善，获得一组对目标方法分支覆盖率100%的测试数据。</p>
<p>![image-20240516102137540](&#x2F;Users&#x2F;zhengguangyi&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20240516102137540.png)</p>
<h3 id="撰写标程"><a href="#撰写标程" class="headerlink" title="撰写标程"></a>撰写标程</h3><p>标程考察的无非以下几个条件：</p>
<ul>
<li>检查 <code>ensure</code>；</li>
<li>检查 <code>pure/assignable</code>；</li>
<li>检查 <code>invariant/constraint</code>；</li>
<li>等等</li>
</ul>
<p>在具体了解了这些条件后，我们其实可以借鉴<code>OKTest</code>的方法来撰写标程，下面以<code>hw11</code>中的<code>deleteColdEmoji()</code>的测试为例来进行说明。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">judge</span><span class="params">(HashMap&lt;Integer, Integer&gt; beforeEmojis, HashMap&lt;Integer, Integer&gt; beforeMessages, HashMap&lt;Integer, Integer&gt; afterEmojis, HashMap&lt;Integer, Integer&gt; afterMessages, <span class="type">int</span> limit, <span class="type">int</span> result)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> eid : beforeEmojis.keySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (beforeEmojis.get(eid) &gt;= limit &amp;&amp; !afterEmojis.containsKey(eid)) &#123;</span><br><span class="line">                <span class="comment">//System.out.println(eid + &quot; &quot; + beforeEmojis.get(eid));</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> eid : afterEmojis.keySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!beforeEmojis.containsKey(eid)</span><br><span class="line">                    || !beforeEmojis.get(eid).equals(afterEmojis.get(eid))) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : beforeEmojis.entrySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry.getValue() &gt;= limit) &#123;</span><br><span class="line">                ++cnt;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cnt != afterEmojis.size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : beforeMessages.entrySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry.getValue() != <span class="literal">null</span> &amp;&amp; afterEmojis.containsKey(entry.getValue())</span><br><span class="line">                    &amp;&amp; (!afterMessages.containsKey(entry.getKey())</span><br><span class="line">                    || !entry.getValue().equals(afterMessages.get(entry.getKey())))) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : beforeMessages.entrySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry.getValue() == <span class="literal">null</span> &amp;&amp; (!afterMessages.containsKey(entry.getKey())</span><br><span class="line">                    || afterMessages.get(entry.getKey()) != <span class="literal">null</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">6</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : beforeMessages.entrySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry.getValue() == <span class="literal">null</span>) &#123;</span><br><span class="line">                ++cnt;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (afterEmojis.containsKey(entry.getValue())) &#123;</span><br><span class="line">                ++cnt;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cnt != afterMessages.size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">7</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result == afterEmojis.size() ? <span class="number">0</span> : <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，我们针对<code>JML</code>中的<code>\old</code>条件设置了<code>before*</code>的一系列数据点，同时针对每个<code>ensure</code>条件依次测试，对于违反条件的情况依次返回不同的错误值，这样也方便<code>Debug</code>，最后，只要<code>assertEquals(0, judge(beforeEmojis, beforeMessages, afterEmojis, afterMessages, limit, result));</code>即可完成正确性的判断。</p>
<p>借由<code>OKTest</code>的思想，我们能够对于每一个<code>ensure</code>条件都进行测试的撰写，保证了标程的**“万无一失”**。</p>
<h2 id="心得体会"><a href="#心得体会" class="headerlink" title="心得体会"></a>心得体会</h2><h3 id="收获"><a href="#收获" class="headerlink" title="收获"></a>收获</h3><p>还是照例先谈谈这一单元的收获吧，在<strong>Unit3</strong>的学习中，我主要在以下三个方面有所收获：</p>
<ol>
<li>复习了<strong>图论</strong>的相关算法，包括<code>BFS，并查集，Dijkstra</code>等</li>
<li>初步学习了<code>JML</code>，对于规格化设计有了初步了解。</li>
<li>了解了各种测试方法，并且重新捡起了在电梯单元无暇进行的评测机撰写。</li>
</ol>
<h3 id="一点吐槽"><a href="#一点吐槽" class="headerlink" title="一点吐槽"></a>一点吐槽</h3><p>先谈谈对于<code>JML</code>的感受吧，在进行这一单元学习的同时，我读到了一个有趣的对于语言的吐槽，来自我在北外的学弟。我认为这十分契合我在<strong>Unit3</strong>的学习体会，决心一定要写进博客作业里。</p>
<blockquote>
<p>JML像是在英汉对译的时候，先将<strong>中文</strong>翻译为<strong>法语</strong>，再把<strong>法语</strong>翻译成<strong>英文</strong>。我<strong>中文</strong>还好点，<strong>英文水平</strong>一般，<strong>法语</strong>则是完全不会。纵使说<strong>法语</strong>严谨到天花乱坠，对我来讲与鬼画符真没啥区别。谈及<strong>JML</strong>的优点，我确实无话可说，能与JML相遇是我的缘分，不过我希望这样的缘分越少越好。</p>
</blockquote>
<p>当然，<code>JML</code>能够流传下来，传播甚广，一定是有其独到之处的。就像是那个经典的哲学辩题——被误解是不是表达者的宿命，我在想，如果哲学家辩论时能够使用<code>JML</code>华山论剑，那想必答案已然明了，作为一种**“建模”语言**，<code>JML</code>最大的有点便是尽可能的减少了误解的存在。</p>
<p>但事实是否真的如此呢，<code>JML</code>显然不便于撰写，<strong>Unit3</strong>横跨五一假期，假期中我最担心的便是指导书和<code>JML</code>标程的突然修改，因为这很有可能使我的假期泡汤，而这，在这一单元<strong>经常发生！！！</strong></p>
<p>第二则是评测机的“不确定性”，虽说课程组给出的时间限制是<strong>10s</strong>，但是在实际情况下，一旦本地运行超过<strong>1.8s</strong>，那么便很有可能发生<code>CTLE</code>，这实在叫人胆战心惊，每一次点开强测结果都像是开盲盒，非常刺激😊。</p>
<p>最后还是感谢助教的辛勤付出，以上只是我的<strong>一点牢骚</strong>，我们也很能理解助教频繁修改指导书，<code>JML</code>背后的不易。只是，连助教团队在实际编写过程中都频繁出错的<code>JML</code>是否有继续推广的价值呢，我认为值得商榷！！！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-08-13T09:15:00.000Z" title="2025/8/13 17:15:00">2025-08-13</time>发表</span><span class="level-item"><time dateTime="2025-08-13T09:16:10.712Z" title="2025/8/13 17:16:10">2025-08-13</time>更新</span><span class="level-item">14 分钟读完 (大约2062个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/08/13/BUAA%20OO%20Unit4%20%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93%E6%9A%A8%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/">OO第四单元总结暨课程总结</a></p><div class="content"><h1 id="BUAA-OO-Unit4-单元总结暨课程总结"><a href="#BUAA-OO-Unit4-单元总结暨课程总结" class="headerlink" title="BUAA OO Unit4 单元总结暨课程总结"></a>BUAA OO Unit4 单元总结暨课程总结</h1><p>[TOC]</p>
<h2 id="正向建模与开发"><a href="#正向建模与开发" class="headerlink" title="正向建模与开发"></a>正向建模与开发</h2><p>先简单介绍一下<font color=CadetBlue><strong>正向建模与开发</strong></font>的定义</p>
<blockquote>
<p>正向建模与开发是一种根据给定的需求创建或制作应用程序的方法。正向建模与开发也被称为翻新和回收。正向建模与开发需要高水平的技能，它需要更多的时间来构建或开发应用程序。正向建模与开发是一种创建高层模型或设计的技术，以增加复杂性和低层信息。因此，这种工程在不同的软件和数据库过程中有不同的原则。正向建模与开发应用了所有的软件工程过程，包括软件开发生命周期（SDLC），以重新创建现有的应用程序。它是为了满足用户的新需求而进行重构的。</p>
</blockquote>
<p>本单元的主题是<code> UML</code>，正向建模与开发自然是最重要的一环，我个人也是按照课程组的指导，每次作业先做好建模设计再写代码。具体步骤如下：</p>
<ol>
<li>通读指导书，记录需求重点和细节，并针对边界情况，<strong>各种功能编写各种样例</strong></li>
<li>依据样例，整理项目逻辑，记录<strong>各个类的协作关系</strong>(类似于顺序图的要求)</li>
<li><strong>依据整理的逻辑进行设计，画出类图草图和协作图草图</strong></li>
<li>编写代码</li>
<li>使用 <code>StarUml</code> 软件参照画<code> uml</code> 图</li>
</ol>
<p>其实前几步在其他几个单元的作业中我也会做，毕竟在完全不做设计的情况下写代码是很难的。但是我认为在设计阶段就画仔细的 <code>uml</code> 图其实不太方便，因为 <code>StarUml </code>细节比较多，要用鼠标点来点去，会分散设计阶段的注意力，但用纸和笔来画草图就很方便，而且还可以自己加各种提示在图中。所以我每次都是先画草图，再在全部写完以后用 <code>StarUml</code>画出最终的 <code>uml</code> 图。</p>
<p>放上一张<code>Unit1</code>的设计图，<del>也算是有始有终了🥳</del>：</p>
<p>![OO Unit1架构-5](&#x2F;Users&#x2F;zhengguangyi&#x2F;Downloads&#x2F;OO Unit1架构-5.jpg)</p>
<h2 id="架构设计和UML模型设计之间的追踪关系"><a href="#架构设计和UML模型设计之间的追踪关系" class="headerlink" title="架构设计和UML模型设计之间的追踪关系"></a>架构设计和UML模型设计之间的追踪关系</h2><p>本单元架构：<br>![image-20240611165031916](&#x2F;Users&#x2F;zhengguangyi&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20240611165031916.png)</p>
<p>在这几次的作业中，为了做到<strong>高内聚，低耦合</strong>，我根据指导书的要求对于相应的对象都建了类，让他们各司其职。但是随着需求的增多以及复杂度要求更高，对于<strong>低耦合</strong>的实现就造成了很大的困难，尤其在<code>OrderRecord</code>和<code>BorrowRecord</code>两个类呈现出较大的耦合性。对于一致性方面，流程图以及状态图的实现都较简单，因此一致性较好。</p>
<h2 id="架构设计思维的演进"><a href="#架构设计思维的演进" class="headerlink" title="架构设计思维的演进"></a>架构设计思维的演进</h2><p>其实我感觉第一单元是架构设计最复杂的单元，因为表达式十分抽象，如果没有<code>training</code>和实验，我甚至都不知道怎么设计各个类，导致架构设计的难度很高，所以我的架构设计能力基本是在第一单元中养成的。<br>我设计架构以及写代码的核心思想就是追求简单，怎么简单怎么来。因为逻辑简单的代码更好把控，更不容易出 <strong>bug</strong>，即使真的出问题也很好定位。<br>我在 <strong>1，2 单元</strong>中都进行了轻微重构，重构的方向都是把原来复杂一些的代码化简，即使这可能会牺牲一些性能或是架构的美观性。<br>其实“面向对象性”和架构简单性的矛盾是我一直在思考的内容。以第四单元举例，如果想秉承模块化等思想，是应该把每个<strong>功能处拆成单个类来写的，而不是在图书馆类里面写多个组合函数</strong>。但更多的类、更多的包装会导致更多的函数嵌套调用或是对象的嵌套使用，这其实会增加代码逻辑上的复杂度，也可能会增加出问题时 debug 的难度，排查一个问题时可能需要跳转多个函数，且多个函数之间都可能出现问题。这个问题我一直没有一个清晰的答案，在几个单元的作业中，我认为代码逻辑简单更重要，但这种想法也不一定对。<strong>这个问题最终的答案我可能也要到后续的代码编写实践中获取了</strong>。</p>
<h2 id="测试思维的演进"><a href="#测试思维的演进" class="headerlink" title="测试思维的演进"></a>测试思维的演进</h2><p>其实在这四个单元中，我的测试思路没有什么变化，都是黑白箱结合的方式。一方面通过阅读代码梳理逻辑等方式进行白箱测试，另一方面编写评测机或者数据生成器进行测试或对拍。<br>这种测试方法的优点是效果尚可，只要生成的数据强度过硬就能测出代码的 bug，同时结合一点编写针对性debug样例的技巧，能够快速地定位bug，便于后续debug。</p>
<p><font color=Red><strong>具体而言：</strong></font></p>
<ul>
<li><p>第一单元，借用递归下降的优势，测试数据的生成，和程序的编写，都可以一同使用，采用了大量的随机数据与少数特殊数据因子相结合的构建方法。</p>
</li>
<li><p>第二单元，<strong>DPO</strong>😭狠狠的膜了。</p>
</li>
<li><p>第三单元，主要是随机数据，同时考虑查询数据的大量性，保证基本正确性的前提下，构建大量查询边界数据来测试<code>TLE</code>。另外，还有<code>Junit</code>测试。</p>
</li>
<li><p>第四单元，鉴于数据有极大的限制，前期边界条件的模糊，在没有保证自己评测会不会正确的前提下，后续参考<a target="_blank" rel="noopener" href="https://github.com/solor-wind/BUAA_OO_TEST/tree/test15">张鑫和高鹏飞同学的评测机</a>并加以魔改来完成评测。</p>
</li>
</ul>
<h2 id="课程收获"><a href="#课程收获" class="headerlink" title="课程收获"></a>课程收获</h2><blockquote>
<p><font color=Green><strong>入宝山不要空手而归</strong></font></p>
</blockquote>
<p>其实在上 OO 课之前，我就已经听说过其大名了，知道 OO 很苦很累但是能学到不少东西。但实际体验的收获还是超乎我的想象。我竟然还在一个星期内学会了多线程，这种高效率的学习是我非常喜欢的。在这之前，我也自学过各种东西，但网上的教程总是学起来效率很低，且缺乏在指导下的大规模高效实践，导致学出来只能用来吹没法实干。但 OO 课程却完全解决了这个问题，OO 课通过高压的训练和适当的引导让我很快的发现解决问题所需的重点知识并掌握了它们，在 OO 课程的学习中，我还接触了很多面向对象和 Java 以外的有用的东西，比如 JML 与契约式编程或是非常使用的 UML还有通过python来搭建评测机。这些知识也让我受益匪浅。<br>总而言之，通过 OO 课程的学习，我见识并掌握了很多各种各样的知识，练就了各种各样的能力，收获满满。<br>最后，很感谢老师们和助教们长久以来的付出和对我的帮助，也注 OO 课程越办越好。</p>
<p><strong>还是那句古训，无论艰难困苦，最后结果成功也好，失败也罢，莫以成败论英雄，</strong><font color=RED><strong>入宝山切莫空手而归！！！</strong></font></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-08-13T09:15:00.000Z" title="2025/8/13 17:15:00">2025-08-13</time>发表</span><span class="level-item"><time dateTime="2025-08-13T09:18:33.026Z" title="2025/8/13 17:18:33">2025-08-13</time>更新</span><span class="level-item">21 分钟读完 (大约3128个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/08/13/BUAA%20OO%20Unit2%20%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93/">OO第二单元总结</a></p><div class="content"><h1 id="BUAA-OO-Unit2-单元总结"><a href="#BUAA-OO-Unit2-单元总结" class="headerlink" title="BUAA OO Unit2 单元总结"></a>BUAA OO Unit2 单元总结</h1><p>[TOC]</p>
<p>如果要让我对这充满坎坷的“电梯月”做一个总结，我认为贝克特的这一句名言无疑是最贴切的：</p>
<blockquote>
<p>[!IMPORTANT]</p>
<p><em>Ever tried,Ever failed,No matter.Try again,Fail again,Fail better.</em> 											–塞缪尔·贝克特</p>
</blockquote>
<p>事实上，如果你碰巧是一名文学爱好者，那么你可能很难相信以荒诞文学闻名的贝克特会说出这样励志的名言。正如在真正完成这一单元之前，我也不会想到自己会在面对多线程层出不穷的Bug时，依然坚持”Fail again, fail better”。</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>第二单元我们要实现的是基于共享数据的，多线程电梯调度问题，在这一过程中，要迭代出电梯重置，双轿电梯等功能。相比第一单元，在第二单元的设计工作中，我深刻感受到了设计架构的重要性，以及多线程并行计算的优势。</p>
<h2 id="整体架构图"><a href="#整体架构图" class="headerlink" title="整体架构图"></a>整体架构图</h2><h3 id="UML图"><a href="#UML图" class="headerlink" title="UML图"></a>UML图</h3><p>由于是迭代开发，在这张UML图上我们可以看到这一路的过程。</p>
<p>白色的部分代表第一次作业。</p>
<p>绿色的部分代表第二次作业的增添。</p>
<p>紫色的部分代表第三次作业的增添。</p>
<p><img src="/source/images/U2.png"></p>
<h3 id="时序图"><a href="#时序图" class="headerlink" title="时序图"></a>时序图</h3><p><img src="/source/images/Process.png"></p>
<h2 id="设计架构开发历程"><a href="#设计架构开发历程" class="headerlink" title="设计架构开发历程"></a>设计架构开发历程</h2><blockquote>
<p>[!CAUTION]</p>
<p>第二单元的架构开发，我想多介绍一些， 对比第一单元作业，性能不在是实实在在的需求，而是相对虚无缥缈的东西。在保证正确性的前提下，不进行任何性能优化，也能有不错的性能分，因此架构占据了绝对的主导作用。</p>
<p>关于方法的复杂度就放在最后一起分析了。</p>
</blockquote>
<h3 id="作业要求："><a href="#作业要求：" class="headerlink" title="作业要求："></a>作业要求：</h3><p>第二单元的任务为模拟群控电梯调度，重点在于多线程并发的设计。以下是任务的迭代：<br>· hw5模拟了6部电梯的调度，乘客的请求会指定特定电梯<br>· hw6的乘客可以自由分配给任意一部电梯，电梯需要输出已接收信号。同时增加了电梯参数的重置，重置时会暂停并处于静默状态<br>· hw7增加了分裂为双轿厢的重置模式，需要在换乘层进行协调</p>
<h3 id="hw5"><a href="#hw5" class="headerlink" title="hw5"></a>hw5</h3><h4 id="同步块和锁"><a href="#同步块和锁" class="headerlink" title="同步块和锁"></a>同步块和锁</h4><p>第一次作业，同时也是首次进行多线程编程，完成作业的大部分时间都放在了理解什么是多线程，以及什么是同步块上。</p>
<p>那么什么是同步块呢？简单来说就是，随便找点什么，多个类共用（指的是多个线程在同一时刻共同访问），套上<code>synchronized</code>关键字。同步块的效果是什么？套上<code>synchronized</code>关键字之后，在每一个时刻只能有一个线程访问。什么是锁？锁是当多个线程竞争同一个共享数据的时候，不让其他线程访问的重要武器。在<code>synchronized</code>之外，还可以通过重入锁，读写锁等方式实现灵活的上锁。</p>
<p>由于第一次作业要求实在太过简单，六台电梯分别有自己对应的乘客，因此只需将总请求池上锁即可，同时在电梯需要进行<code>sleep()</code>时给电梯上锁，确保其状态不受改变就可以保证线程安全，具体细节上采用<code>ReentrantLock</code>即可实现，无需多言。</p>
<h4 id="调度器和调度策略"><a href="#调度器和调度策略" class="headerlink" title="调度器和调度策略"></a>调度器和调度策略</h4><p>由于第一次不涉及“电梯抢人”的问题，所以无需设计调度器以及调度策略。</p>
<h4 id="电梯运行算法"><a href="#电梯运行算法" class="headerlink" title="电梯运行算法"></a>电梯运行算法</h4><p>采用的是<code>LOOK</code>运行算法，也是日常生活中的电梯算法，即顺带接人运行策略，略微不同的地方是，现实中，在乘客进入电梯前，我们是不知道乘客的目的地的。但在本单元的作业中，人不是线程而是一个<code>Object</code>，不仅方便了调度器的分配，而且降低了复杂度。</p>
<h3 id="hw6"><a href="#hw6" class="headerlink" title="hw6"></a>hw6</h3><h4 id="同步块和锁-1"><a href="#同步块和锁-1" class="headerlink" title="同步块和锁"></a>同步块和锁</h4><p>与第一次作业类似，实际上，由于我们的分配操作是将一个个请求添加到每个电梯各自的请求的请求队列中，还是要将请求池，电梯各自的请求队列以及电梯自身设为共享对象，并围绕他们构建同步块，进行上锁。</p>
<h4 id="调度器和调度策略-1"><a href="#调度器和调度策略-1" class="headerlink" title="调度器和调度策略"></a>调度器和调度策略</h4><p>调度器采用**<code>影子电梯</code>**策略，即算出局部最优解分配给6个线程。具体做法是对电梯和该电梯的处理队列进行深克隆，调用克隆后的<code>shadowElevator.move()</code>实现模拟推进时间，遍历6个电梯，找出能够使得新请求加入后整体运行时间结束最早的那一种加入请求算法。<br>  为方便说明，举例如下图所示：绿色方块为电梯原有请求完成需要花费时间，每一列为一种分配策略对应各个电梯用时（共六种，即把新请求分配给六个电梯，分别遍历），找出该策略下用时最久的电梯为该策略对应的全局任务完成时间，再将六个策略的时间找出最短的，就获得了局部最优解。下图的情况即为将新请求加入3号电梯是局部最优解。</p>
<p><img src="https://img-community.csdnimg.cn/images/6d5558f347c74cbfabb8bdc6354003b6.png?x-oss-process=image/auto-orient,1"></p>
<blockquote>
<p>注：示例图片来自<a target="_blank" rel="noopener" href="https://bbs.csdn.net/topics/614676460">武彬煦学长的博客</a></p>
</blockquote>
<p>这样，调度器成为了线程，调度器和输入线程之间，调度器和各个电梯之间，通过一个等待队列连接。</p>
<p>这样的策略可以做到局部时间最优，由于本人的懒惰，并未在影子电梯的指标中加入耗电量的考量。</p>
<h3 id="hw7"><a href="#hw7" class="headerlink" title="hw7"></a>hw7</h3><h4 id="同步块和锁-2"><a href="#同步块和锁-2" class="headerlink" title="同步块和锁"></a>同步块和锁</h4><p>与第二次作业类似，实际上，由于我们的分配操作是将一个个请求添加到每个电梯各自的请求的请求队列中，还是要将请求池，电梯各自的请求队列以及电梯自身设为共享对象，并围绕他们构建同步块，进行上锁。<del>事实上，这只是我粗浅的理解，让我在互测中身中15刀</del></p>
<blockquote>
<p>[!CAUTION]</p>
<p>事实上，由于我的设计中，DC Reset要往调度器类中的电梯队列里添加电梯，而在判断调度器线程是否结束时要遍历电梯队列，而我未对电梯队列上锁，这样会报错<code>ConcurrentModificationException</code>😭</p>
</blockquote>
<h4 id="调度器和调度策略-2"><a href="#调度器和调度策略-2" class="headerlink" title="调度器和调度策略"></a>调度器和调度策略</h4><p>调度器依旧采用**<code>影子电梯</code>**策略，由于这次存在双轿厢电梯，而影子电梯无法模拟换乘，因此在计算电梯结束时间时，对于双轿厢电梯中无法直达的请求，采取惩罚补时，来进行粗略模拟，效果还可以。</p>
<h4 id="双轿厢电梯安全控制"><a href="#双轿厢电梯安全控制" class="headerlink" title="双轿厢电梯安全控制"></a>双轿厢电梯安全控制</h4><p>在设计这次作业时OS正好在学<strong>信号量</strong>，事实上，换乘楼层只允许一个轿厢停靠，本质上就是一种信号量操作，而最大值为一的信号量实际上就是一把锁，两轿厢要进入换乘楼层时尝试获得锁，离开换乘楼层时释放锁即可。</p>
<p>具体代码上通过设置<code>Police</code>类来监管双轿厢：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Police</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">occupied</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">getAccess</span><span class="params">(Character type)</span> &#123;</span><br><span class="line">        tryAccess(type);</span><br><span class="line">        occupied = <span class="literal">true</span>;</span><br><span class="line">        notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">tryAccess</span><span class="params">(Character type)</span> &#123;</span><br><span class="line">        notifyAll();</span><br><span class="line">        <span class="keyword">while</span> (occupied) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">()</span> &#123;</span><br><span class="line">        occupied = <span class="literal">false</span>;</span><br><span class="line">        notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="稳定和易变"><a href="#稳定和易变" class="headerlink" title="稳定和易变"></a>稳定和易变</h3><h4 id="稳定："><a href="#稳定：" class="headerlink" title="稳定："></a>稳定：</h4><p>稳定的内容主要还是电梯的捎带一直采取<code>LOOK</code>算法，保证了绝大多数情况下电梯平均性能的优越性。同时在二三次作业中都采取了影子电梯模拟的调度策略，改变不大。</p>
<h4 id="易变："><a href="#易变：" class="headerlink" title="易变："></a>易变：</h4><p>乘客需求，电梯的类型每次作业都在改变，而这些都是通过<code>Reset</code>指令实现的，如何妥善实现这些指令也正是本单元的设计重点。</p>
<p><strong>结束的条件</strong>也随之变化，从每个电梯自己结束，到调度器统一分配结束。</p>
<h2 id="BUG分析"><a href="#BUG分析" class="headerlink" title="BUG分析"></a>BUG分析</h2><h3 id="hw5-1"><a href="#hw5-1" class="headerlink" title="hw5"></a>hw5</h3><p>第五次作业较为简单，在本地编写代码以及线上测试时都未发现Bug</p>
<h3 id="hw6-1"><a href="#hw6-1" class="headerlink" title="hw6"></a>hw6</h3><p>第六次作业在编写时遇到的最主要的Bug在于线程无法安全结束，原因在于<strong>与第五次作业不同</strong>，在第六次作业中<strong>调度器</strong>是作为一个线程存在的，因此要确定它和电梯线程结束的顺序就成为了Bug产生的<strong>重灾区</strong>，最终也是通过不断通过评测机测试得到错误数据再通过<code>Print</code>大法来查看线程具体结束情况最终解决Bug。</p>
<p>在互测中产生了一个Bug，原因是在五台电梯<code>Reset</code>时会将所有请求分给一台可以使用的电梯，最终导致<code>RTLE</code>。只要在只有一台电梯不在<code>Reset</code>时让调度器等一等就行了，也不会轮询。</p>
<h3 id="hw7-1"><a href="#hw7-1" class="headerlink" title="hw7"></a>hw7</h3><p>第七次作业的Bug堪称最搞笑的一集。</p>
<p>强测中没出现Bug，但在互测中，由于我的设计在DC Rese时要往调度器类中的电梯队列里添加电梯，而在判断调度器线程是否结束时要遍历电梯队列，而我未对电梯队列上锁，这样会报错<code>ConcurrentModificationException</code>，或者造成无法正常<code>Reset</code>，导致CTLE，最终身中15刀。</p>
<p>解决办法是做<code>ArrayList&lt;Elevator&gt; elevators </code> $\to$ <code>CopyOnWriteArrayList&lt;Elevator&gt; elevators</code>的修改即可。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>毫无疑问，对于多线程编程而言，Debug绝对是最痛苦，最耗时的部分。总结来看，一个好的架构往往能保证较高的Bug复现率。</p>
<p>而对于多线程Bug，除了<code>Print</code>大法我深感无力，这也导致在强测结果出来前我一直保持着“先质疑，再质疑”的态度，好在最后强测都没出事，也算是万幸。</p>
<blockquote>
<p>[!IMPORTANT]</p>
<p>还是那句老话，对于多线程测试，评测机上十万组正确数据都不如一个能稳定复现的Bug来的金贵和安心。</p>
</blockquote>
<h2 id="心得体会"><a href="#心得体会" class="headerlink" title="心得体会"></a>心得体会</h2><h3 id="线程安全"><a href="#线程安全" class="headerlink" title="线程安全"></a>线程安全</h3><p>从单线程到多线程，性能上的巨大飞跃，必然带来的是设计上的复杂性，数据安全便是这方面的核心，但是更重要的是保证线程安全的同时，提高解决效率，不能长时间占有锁，更不能在<code>sleep</code>的时候占有锁，要保证原子性，但一定要对同一时间的多条判断语句进行原子锁。</p>
<p>保证线程安全下的提高效率，真正的拉开了与单线程之间的差距，只注重数据的安全的结果往往是死锁，和轮询，这是要极力避免的。</p>
<h3 id="层次化设计"><a href="#层次化设计" class="headerlink" title="层次化设计"></a>层次化设计</h3><p>好的设计带来的优势在这一单元体现的淋漓尽致。正如前文所言，好的设计能够极大减少性能优化上的工作，以及提高本地测试时的Bug复现率，能够减少代码编写时的时间耗费。</p>
<p>“两天设计，一日编码”。这单元最好的工作流程就是这样，多线程编程设计细节颇多，如果无法在设计上提前规划这些细节，那么只会徒增Bug，白白浪费时间罢了。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-08-13T08:41:17.597Z" title="2025/8/13 16:41:17">2025-08-13</time>发表</span><span class="level-item"><time dateTime="2025-08-13T08:41:17.597Z" title="2025/8/13 16:41:17">2025-08-13</time>更新</span><span class="level-item">1 分钟读完 (大约123个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/08/13/hello-world/">Hello World</a></p><div class="content"><p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives/"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories/"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags/"><p class="title">1</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="me noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-08-13T12:57:26.637Z">2025-08-13</time></p><p class="title"><a href="/2025/08/13/OO-1/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-08-13T09:15:00.000Z">2025-08-13</time></p><p class="title"><a href="/2025/08/13/BUAA%20OO%20Unit3%20%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93/">OO第三单元总结</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-08-13T09:15:00.000Z">2025-08-13</time></p><p class="title"><a href="/2025/08/13/BUAA%20OO%20Unit4%20%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93%E6%9A%A8%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/">OO第四单元总结暨课程总结</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-08-13T09:15:00.000Z">2025-08-13</time></p><p class="title"><a href="/2025/08/13/BUAA%20OO%20Unit2%20%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93/">OO第二单元总结</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-08-13T08:41:17.597Z">2025-08-13</time></p><p class="title"><a href="/2025/08/13/hello-world/">Hello World</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/08/"><span class="level-start"><span class="level-item">八月 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/OO/"><span class="tag">OO</span><span class="tag">3</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="aaa" data-ad-slot="aaa" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="RooKieZ的小窝" height="28"></a><p class="is-size-7"><span>&copy; 2025 RooKieZ</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>